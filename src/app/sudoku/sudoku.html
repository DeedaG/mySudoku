
<script async 
src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5670541810503551"
     crossorigin="anonymous"></script>

     <div class="wrapper">
<div class="layout">

  <!-- LEFT / TOP column -->
  <div class="sidebar">
    <strong class="title">ðŸ§© Sudoku</strong>
    <!-- <div class="navigate">
      <app-donate></app-donate>
      <button class="back-button" style="padding: 3px; margin: 3px; margin-bottom: 0px;" (click)="goBack()">Back to Main</button>
    </div> -->
     <div class="navigate">
      <button class="new-game" (click)="newPuzzle()">ðŸ§© New Game</button>
      <button class="back-button" class="back-to-main" (click)="goBack()">Back to Main</button>
    </div>
    <div class="controls-row">

      <div class="difficulty">
        <label >Difficulty</label>
        <select [(ngModel)]="difficulty" (change)="onDifficultyChange()">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
          <option value="evil">Evil</option>
        </select>
      </div>
    </div>
    <div class="notes-and-timer">
      <button class="notes-button" (click)="toggleNotes()">
        {{ notesMode ? 'Notes On' : 'Notes Off' }}
      </button>
      <div class="timer">
        Time: {{ formattedTime }}
      </div>
    </div>
    <app-ads></app-ads>
  </div>

  <!-- RIGHT column = puzzle + solved message -->
  <div class="puzzle-area">

    @if (solved) {
      <div class="solved-message">
        <div >ðŸŽ‰ Congratulations! 
          <span style="font-size: 20px;">You solved the puzzle in {{formattedTime}} minutes!</span>
        </div>
        
      </div>
    }

    <div class="sudoku-wrapper">

      <!-- Container with background image -->
      <div class="board-container">
        <div class="sudoku-board">
          @for (row of valuesGrid; track trackByIndex($index, row); let i = $index) {
            <div class="row">
            @for (_ of row; track trackByIndex($index, _); let j = $index) {
                  <div class="cell-wrapper">
                  @if (!notesMode) {
                    <input
                      class="cell"
                      type="text"
                      maxlength="1"
                      [(ngModel)]="valuesGrid[i][j]"
                      (ngModelChange)="onCellInput(i, j, $event)"
                      [readOnly]="fixed[i][j]"
                      [class.fixed]="fixed[i][j]"
                      [class.error]="errors[i][j]"
                      (click)="onCellTap(i, j)"
                      (keydown)="onKeyDown($event)"
                    />
                  }

                  @if (notesMode) {
                    <div class="cell notes-mode">
                      <div class="cell-value">
                        {{ valuesGrid[i][j] }}
                      </div>
                      <div class="notes">
                        @for (n of notesGrid[i][j]; track trackByIndex($index, n)) {
                          <div class="note">{{ n }}</div>
                        }
                      </div>
                      <input
                        class="cell-input"
                        type="text"
                        maxlength="9"
                        (ngModelChange)="onCellInput(i, j, $event)"
                        [ngModel]="''"  
                        [readOnly]="fixed[i][j]"
                        (click)="onCellTap(i, j)"
                        (keydown)="onNoteKey($event,i,j)"
                      />
                    </div>
                  }
                </div>
              }
            </div>
          }

        </div>
      </div>

    </div><!-- sudoku-wrapper -->
    <div class="christi">Christi Games</div>

  </div><!-- puzzle-area -->

</div><!-- layout -->
</div>
